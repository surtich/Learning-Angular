# Capítulo 15 Optimización del rendimiento de las aplicaciones

## `Core Web Vitals`

`CWV` es un conjunto de métricas que ayudan a medir el rendimiento de una aplicación web. Forma parte de `Web Vitals`, una iniciativa liderada por Google que unifica varias guías y herramientas para medir el rendimiento en páginas web. Cada métrica se centra en un aspecto específico de la experiencia del usuario, incluyendo la carga, la interactividad y la estabilidad visual de una página web:

* `Largest Contentful Paint` (`LCP`): Mide la velocidad de carga de una página web calculando cuánto tiempo tarda en renderizarse el elemento más grande de la página. Un valor `LCP` rápido indica que la página está disponible para el usuario rápidamente.
* `Interaction to Next Paint` (`INP`): Mide la capacidad de respuesta de una página web calculando cuánto tiempo tarda en responder a las interacciones del usuario y proporcionar información visual. Un valor `INP` bajo indica que la página responde al usuario rápidamente.
* `Cumulative Layout Shift` (`CLS`): Mide la estabilidad de la interfaz de usuario en una página web calculando la frecuencia con la que se producen cambios de `layout` no deseados. Un cambio de `layout` suele ocurrir cuando los elementos `HTML` se mueven en el `DOM` debido a la carga dinámica o asíncrona. Un valor `CLS` bajo indica que la página es visualmente estable.

`Web Vitals` contiene métricas adicionales que contribuyen al conjunto `CWV` existente al medir un área más amplia o de nicho de la experiencia de usuario, como `First Contentful Paint` (`FCP`) y `Time to First Byte` (`TTFB`).

El valor de cada métrica `CWV` se clasifica en las siguientes categorías:

* BUENO (verde)
* NECESITA MEJORAS (naranja)
* POBRE (rojo)


Es posible medir las `CWV` de las siguientes maneras:

* En el campo: Se pueden utilizar herramientas como `PageSpeed Insights` y `Chrome User Experience Report` mientras la aplicación web se ejecuta en producción.
* Programáticamente en `JavaScript`: Se pueden utilizar las `API` web estándar o bibliotecas de terceros como `web-vitals`.
* En el laboratorio: Se pueden utilizar herramientas como `Chrome DevTools` y `Lighthouse` durante la construcción de la aplicación web en la fase de desarrollo.

En este capítulo nos centraremos en medir el rendimiento con `Lighthouse`.

Si pulsamos sobre la pestaña `Lighthouse` en `Chrome DevTools`, podemos ejecutar una auditoría de rendimiento de la aplicación. `Lighthouse` generará un informe que incluye las métricas `CWV` y otras métricas de rendimiento, como el tiempo de carga, el tiempo de interacción y la estabilidad visual. También proporciona sugerencias para mejorar el rendimiento de la aplicación.

Si elegimos únicamente el informe de rendimiento (`Performance`), `Lighthouse` muestra un pobre resultado. En cualquier caso, este resultado variará en función de las capacidades del equipo y de las extensiones instaladas en el navegador. Por ello, en conveniente ejecutarlo en una ventana de incógnito y con las extensiones desactivadas (ya que algunas pueden estar activas incluso en este modo).