# Capítulo 10 Forms

El `framework` Angular proporciona dos enfoques para manejar formularios: los controlados por `template` y los reactivos. Ninguno de los enfoques se considera mejor; se debe elegir el que mejor se adapte a su escenario.

La principal diferencia entre los dos enfoques es cómo gestionan los datos:

* Formularios controlados por `template`: Son fáciles de configurar y añadir a una aplicación Angular. Operan únicamente en el `template` del componente para crear elementos y configurar reglas de validación; por lo tanto, no son fáciles de probar. También dependen del mecanismo de detección de cambios del `framework`.
* Formularios reactivos: Son más son más fáciles de escalar y probar. Operan en la
clase del componente para gestionar los controles de entrada y establecer las reglas de validación. También manipulan los datos utilizando un modelo de formulario intermedio, manteniendo su naturaleza inmutable.

## Formularios controlados por `template`

En los formularios controlados por `template`, se pueden usar `two-way binding` para leer y escribir datos simultáneamente. Los formularios controlados por `template` proporcionan la directiva `ngModel`, que se puede usar en los componentes para obtener este comportamiento. Para obtener más información sobre los formularios controlados por `template`, se convertirá la funcionalidad de cambio de precio del componente de detalle del producto para que funcione con formularios Angular.

Mientras se está escribiendo en el `input`, la directiva `ngModel` actualiza el valor del precio del producto.
El nuevo precio se refleja directamente en el `template` porque se utiliza la sintaxis de interpolación de Angular para mostrar su valor.

En este caso, actualizar el precio del producto mientras se introduce uno nuevo es una mala experiencia de usuario.
El usuario debería poder ver el precio actual del producto en todo momento. Se modifica el
componente de detalle del producto para que el precio se muestre correctamente. Esto se consigue haciendo el `binding` a una variable auxiliar en lugar de usar directamente el producto.

## Formularios reactivos

Los `reactive forms`, como su nombre indica, proporcionan acceso de forma reactiva a los formularios web. Están construidos pensando en la reactividad, donde los controles de `input` y sus valores pueden manipularse utilizando `observable streams`. También mantienen un estado inmutable de los datos del formulario, lo que los hace más fáciles de probar porque se puede estar seguro de que el estado del formulario puede modificarse de forma explícita y consistente. Los `reactive forms` tienen un enfoque programático para crear elementos de formulario y establecer reglas de validación configurando todo en la clase del componente. Las clases clave de Angular involucradas en este enfoque son las siguientes:

* `FormControl`: Representa un control de formulario individual, como un elemento `<input>`.
* `FormGroup`: Representa una colección de controles de formulario. El elemento `<form>` es el `FormGroup` superior en la jerarquía de un `reactive form`.
* `FormArray`: Representa una colección de controles de formulario, al igual que `FormGroup`, pero puede modificarse en tiempo de ejecución. Por ejemplo, se pueden añadir o eliminar objetos `FormControl` dinámicamente según sea necesario.
* `FormBuilder`: Proporciona una forma más sencilla de crear instancias de `FormControl`, `FormGroup` y `FormArray`. Permite crear formularios de forma más concisa y legible.
  
Las clases anteriores están disponibles en el paquete `npm` `@angular/forms` y contienen propiedades que pueden utilizarse en los siguientes escenarios:
* Para renderizar la UI de forma diferente según el estado de un formulario o control.
* Para comprobar si se ha interactuado con un formulario o control.
Se explorará cada clase de formulario a través de un ejemplo en nuestra aplicación Angular.

En el primer ejemplo, se introducen los `reactive forms` en el componente de creación de productos.

## Modificación dinámica de formularios

Considere el escenario en el que se han añadido algunos productos al carrito de compras de nuestra aplicación de comercio electrónico y se desea actualizar sus cantidades antes de finalizar el pedido.
Actualmente, nuestra aplicación no tiene ninguna funcionalidad para un carrito de compras, por lo que ahora se añadirá una:

```bash
ng generate interface cart
ng generate service cart
```



