# Capítulo 3 Estructurando la interfaz de usuario con componentes

## Primer componente

Crear un nuevo componente con Angular CLI:

```bash
ng generate component product-list
```

Añadir el componente a `app.ts`:

* Para ello, hay que añadirlo a la lista de importaciones importar del componente.
* Después, hay que añadir el selector del componente (`app-product-list`) al template (`app.html`).

## Property binding

Una forma alternativa de realizar la interpolación en Angular es vincular la propiedad `title` a la propiedad `innerText` del elemento HTML `<h1>`. Con esta técnica se puede modificar cualquier propiedad de un elemento HTML, no solo el texto.

### Mostrando datos condicionalmente

El bloque `@if` añade o elimina un elemento HTML en el DOM basándose en la evaluación de una expresión. Si la expresión se evalúa como `true`, el elemento se inserta en el DOM. De lo contrario, el elemento se elimina del DOM.

Para crear la `interface` `Product` se puede usar la siguiente instrucción de Angular CLI:

```bash
ng generate interface product
```

## Iterando sobre listas

El bloque `@for` nos permite recorrer una colección de elementos y renderizar una plantilla para cada uno, donde podemos definir marcadores de posición convenientes para interpolar los datos del elemento.

El bloque `@for` soporta la adición de una sección `@empty`, la cual se ejecuta cuando el array de elementos está vacío.

El bloque `@for` también soporta la directiva `track`, que permite a Angular identificar de manera eficiente los elementos de la lista y optimizar el renderizado. Esto es especialmente útil cuando se trabaja con listas grandes o dinámicas, ya que ayuda a evitar renderizados innecesarios y mejora el rendimiento de la aplicación.

También admite definir variables con esta estructura:

```typescript
@for (product of products; track product.id; let variable=property) {}
```

Donde `property` puede tomar los siguientes valores:

• $count: Indica el número de elementos en el array
• $index: Indica el índice del elemento en el array
• $first / $last: Indica si el elemento actual es el primero o el último en el array
• $even / $odd: Indica si el índice del elemento en el array es par o impar

## Uso del bloque @switch

El bloque `@switch` alterna entre partes de la plantilla del componente y muestra cada una dependiendo de un valor definido.

## Class binding

Podemos aplicar una sola clase a un elemento HTML usando la siguiente sintaxis:

```html
<p [class.star]="isLiked"></p>
```

En el fragmento anterior, la clase star se añadirá al elemento de párrafo cuando la expresión isLiked sea verdadera. De lo contrario, se eliminará del elemento. Si queremos aplicar múltiples clases CSS simultáneamente, podemos usar la siguiente sintaxis:

```html
<p [class]="currentClasses"></p>
```

La variable `currentClasses` es una propiedad del componente. El valor de una expresión que se usa en un enlace de clase puede ser uno de los siguientes:
• Una cadena de nombres de clase delimitada por espacios, como 'star active'.
• Un objeto con las claves como nombres de clase y los valores como condiciones booleanas para cada clave. Se añade una clase al elemento cuando el valor de la clave, con su nombre, se evalúa como verdadero. De lo contrario, la clase se elimina del elemento:

```typescript
currentClasses = {
    star: true,
    active: false
};
```

## Style binding

Al igual que el enlace de clase, podemos aplicar estilos individuales o múltiples simultáneamente usando un enlace de estilo.
Se puede establecer un estilo único a un elemento HTML usando la siguiente sintaxis:

```html
<p [style.color]="'greenyellow'"></p>
```

En el fragmento anterior, el elemento de párrafo tendrá un color verde amarillento. Algunos estilos se pueden expandir aún más en el enlace, como el ancho del elemento de párrafo, que podemos definir junto con la unidad de medida:

```html
<p [style.width.px]="100"></p>
```

El elemento de párrafo tendrá 100 píxeles de largo. Si necesitamos alternar múltiples estilos a la vez, podemos usar la sintaxis de objeto:

```html
<p [style]="currentStyles"></p>
```

La variable currentStyles es una propiedad del componente. El valor de una expresión que se usa en un enlace de estilo puede ser uno de los siguientes:
• Una cadena con estilos separados por punto y coma, como 'color: greenyellow; width: 100px'
• Un objeto donde sus claves son los nombres de los estilos y los valores son los valores de estilo reales:

```typescript   
currentStyles = {
    color: 'greenyellow',
    width: '100px'
};
```

## Event binding

La interpolación permite enviar datos desde el componente a la vista. Para enviar datos desde la vista al componente, se utilizan eventos.

## Comunicación entre componentes (de padre a hijo)

Para enviar datos desde un componente padre a un componente hijo se utiliza `input signal`.

Con Angular CLI, crear un nuevo componente llamado `product-detail`:

```bash
ng generate component product-detail
```

El bloque @if en la plantilla del componente de detalle del producto implica que la propiedad de entrada del producto es obligatoria; de lo contrario, no muestra su título. Angular no sabe si el componente de lista de productos pasa un valor para el enlace de entrada del producto durante el tiempo de construcción. Si queremos hacer cumplir esa regla durante el tiempo de compilación, podemos definir una propiedad de entrada como obligatoria de la siguiente manera:

```typescript
product = input.required<Product>();
```

## Comunicación entre componentes (de hijo a padre)

Para enviar datos desde un componente hijo a un componente padre, se utiliza `output signal`. Se pueden crear eventos personalizados y enviarlos con `emit()`.

